(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"165a":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{attrs:{padding:""}},[s("div",{staticClass:"row q-mb-lg"},[s("q-input",{staticClass:"col",attrs:{placeholder:"Create New Role"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createRole(t)}},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}}),s("q-btn",{attrs:{color:"primary",size:"sm",label:"Create"},on:{click:e.createRole}})],1),s("div",{staticClass:"row"},[s("q-list",{staticClass:"col",attrs:{bordered:"",highlight:""}},[s("q-item-label",{attrs:{header:""}},[s("div",{staticClass:"row"},[e._v("\n          Roles\n          "),s("q-space"),s("q-icon",{attrs:{color:"primary",name:"refresh",side:""},on:{click:function(t){return e.fetchRoles()}}})],1)]),e._l(e.roles,(function(t,o){return s("q-item",{key:o},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{color:"primary",name:"security"}})],1),s("q-item-section",[e._v(e._s(t))]),s("q-item-section",{attrs:{side:"",clickable:""},on:{click:function(s){return e.deleteRole(t)}}},[s("q-icon",{attrs:{name:"delete",color:"red"}})],1)],1)}))],2)],1)])},n=[],a=(s("e6cf"),s("ddb0"),s("cf57"));s("bc3a");const i=s("1712").to,r=s("ff00"),l=s("547a").default;var c={name:"Roles",components:{},async created(){l.setSettings({TBURL:r["TB_URL"]}),l.setSettings(r);let[e,t]=await i(l.isLoggedIn());e?window.location.assign("#/"):[e,t]=await i(this.fetchRoles())},data(){return{role:"",roles:[]}},methods:{alert(e){alert(e)},async createRole(){return new Promise((async(e,t)=>{if(""===this.role)return this.$q.notify({type:"negative",message:"Role cannot be blank"}),t("role cannot be blank");this.working=!0,this.showCustom();let[s,o]=await i(l.createRole(this.role));this.working=!1,s?(this.$q.notify({type:"negative",message:s.msg||s}),e(!1)):(console.log(o),this.roles=o.roles,this.role="")}))},async fetchRoles(){return new Promise((async(e,t)=>{this.working=!0,this.showCustom();let[s,o]=await i(l.fetchRoles());this.working=!1,s?(this.$q.notify({type:"negative",message:s}),e(!1)):(this.roles=o.roles,e(o.roles))}))},async deleteRole(e){return new Promise((async(t,s)=>{let[o,n]=await i(this.confirm(`Are you sure you want to delete ${e}`,"Delete Role"));return o?t(!1):(this.working=!0,this.showCustom(),[o,n]=await i(l.deleteRole(e)),this.working=!1,o?(console.log(o),this.$q.notify({type:"negative",message:o.msg||o}),t(!1)):(this.roles=n.roles,void t(n.roles)))}))},async confirm(e,t="Confirm"){return new Promise(((s,o)=>{this.$q.dialog({title:t,message:e,cancel:!0,persistent:!0}).onOk((()=>s(!0))).onOk((()=>s(!0))).onCancel((()=>o(!0))).onDismiss((()=>o(!0)))}))},showCustom(e=""){const t=this.$q.dialog({title:e,message:"",progress:{spinner:a["a"],color:"primary"},persistent:!0,ok:!1}),s=setInterval((()=>{!1===this.working&&(clearInterval(s),t.hide())}),500)}}},m=c,h=s("2877"),u=s("9989"),d=s("27f9"),g=s("9c40"),w=s("1c1c"),p=s("0170"),f=s("2c91"),y=s("0016"),k=s("66e5"),q=s("4074"),b=s("eebe"),R=s.n(b),v=Object(h["a"])(m,o,n,!1,null,null,null);t["default"]=v.exports;R()(v,"components",{QPage:u["a"],QInput:d["a"],QBtn:g["a"],QList:w["a"],QItemLabel:p["a"],QSpace:f["a"],QIcon:y["a"],QItem:k["a"],QItemSection:q["a"]})}}]);